# TODO
#   Find what command line arguments need to be given to a vim instance in
#   order to just run these tests.


#"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""#
#                                   Motion                                    #
#"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""#
Given vsh (vsh buffer):
  vimshell: >
  vimshell: >    #echo Hello there
  vimshell: >    echo Hello there

Do (Motion down skips comments and empty lines):
  \<C-n>ix

Expect:
  vimshell: >
  vimshell: >    #echo Hello there
  vimshell: >    xecho Hello there

Do (Motion down with no extra prompts stays at end):
  \<C-n>\<C-n>ix

Expect:
  vimshell: >
  vimshell: >    #echo Hello there
  vimshell: >    xecho Hello there

Do (Moving up at start of file does nothing):
  \<C-p>ix

Expect:
  xvimshell: >
  vimshell: >    #echo Hello there
  vimshell: >    echo Hello there


Do (Moving up with no previous prompt does nothing):
  \<C-n>\<C-p>ix

Expect:
  vimshell: >
  vimshell: >    #echo Hello there
  vimshell: >    xecho Hello there


Given vsh (vsh buffer):
  vimshell: > echo Hello there
  Hello there, this is output

Do (Moving down at last prompt moves to end of output):
  \<C-n>\<C-n>ix

Expect:
  vimshell: > echo Hello there
  xHello there, this is output


Given vsh (vsh buffer):
  vimshell: > # vimshell: > ls
  vimshell: > ls

Do (Down motion includes saved output):
  \<C-n>ix

Expect:
  vimshell: > # vimshell: > xls
  vimshell: > ls

Do (Up motion includes saved output):
  \<C-n>\<C-n>\<C-p>ix

Expect:
  vimshell: > # vimshell: > xls
  vimshell: > ls


Given vsh (vsh buffer):
  vimshell: > 
  vimshell: > ls

Do (Down motion includes complete prompts without commands):
  \<C-n>ix

Expect:
  vimshell: >x 
  vimshell: > ls

Do (Up motion includes complete prompts without commands):
  \<C-n>\<C-n>\<C-p>ix

Expect:
  vimshell: >x 
  vimshell: > ls


# Tabs count as a command character
Given vsh (vsh buffer):
  vimshell: > 	ls

Do (Don't skip tabs):
  \<C-n>ix

Expect:
  vimshell: > x	ls

#"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""#
#                              Parsing Commands                               #
#"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""#
Given vsh (vsh buffer):
  vimshell: >
  vimshell: > 
  vimshell: > ls
  vimshell: >   ls
  vimshell: > 	ls
  vimshell: > # ls
  vimshell: > #ls
  vimshell: >   #ls
  vimshell: >  	#ls
  hello there


Do (Parsing Works nicely):
  :g/^/put =vsh#vsh#ParseVSHCommand(getline('.'))\<CR>

Expect:
  vimshell: >
  -1
  vimshell: > 
  -1
  vimshell: > ls
  ls
  vimshell: >   ls
    ls
  vimshell: > 	ls
  	ls
  vimshell: > # ls
  -1
  vimshell: > #ls
  -1
  vimshell: >   #ls
  -1
  vimshell: >  	#ls
   	#ls
  hello there
  -1


"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
"                                Command Span                                 "
"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
Given vsh (vsh buffer):
  vimshell: >
  vimshell: >

  vimshell: >




  vimshell: >


Do (CommandSpan() works nicely):
  :g/vimshell/s/$/\=string(vsh#vsh#CommandSpan())\<CR>

Expect:
  vimshell: >[]
  vimshell: >[2, 3]

  vimshell: >[4, 8]




  vimshell: >[]

Given vsh (vsh buffer):
  vimshell: >
  hello there

Do (CommandSpan() Final line):
  :s/$/\=string(vsh#vsh#CommandSpan())\<CR>

Expect:
  vimshell: >[1, 2]
  hello there


Given vsh (vsh buffer):
  vimshell: >





  vimshell: >

Do (CommandSpan() inside output):
  j:s/$/\=string(vsh#vsh#CommandSpan())\<CR>

Expect:
  vimshell: >
  [1, 6]




  vimshell: >

"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
"                            Save Output function                             "
"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""

Given vsh (vsh buffer):
  vimshell: > ls
  bin            records    share     tentel_password.txt  TODO
  pstree_output  sensitive  temp_dir  test.vsh             xresources
  $ 
  vimshell: > echo Hello


Do (Save output on command line):
  \six

Expect:
  xvimshell: > # vimshell: > ls
  bin            records    share     tentel_password.txt  TODO
  pstree_output  sensitive  temp_dir  test.vsh             xresources
  $ 
  vimshell: > echo Hello

Do (Save output when in output):
  j\six

Expect:
  vimshell: > # vimshell: > ls
  xbin            records    share     tentel_password.txt  TODO
  pstree_output  sensitive  temp_dir  test.vsh             xresources
  $ 
  vimshell: > echo Hello


"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
"                           Unsave output function                            "
"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""

Given vsh (vsh buffer):
  vimshell: > # vimshell: > ls
  bin            records    share     tentel_password.txt  TODO
  pstree_output  sensitive  temp_dir  test.vsh             xresources
  $ 
  vimshell: > echo Hello

Do (Unsave output on command line):
  \aix

Expect:
  xvimshell: > ls
  bin            records    share     tentel_password.txt  TODO
  pstree_output  sensitive  temp_dir  test.vsh             xresources
  $ 
  vimshell: > echo Hello

Do (Unsave output when in output):
  j\aix

Expect:
  vimshell: > ls
  xbin            records    share     tentel_password.txt  TODO
  pstree_output  sensitive  temp_dir  test.vsh             xresources
  $ 
  vimshell: > echo Hello

"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
"                                 New Prompt                                  "
"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""


Given vsh (vsh buffer):
  vimshell: > ls
  bin            records    share     tentel_password.txt  TODO
  pstree_output  sensitive  temp_dir  test.vsh             xresources
  $ 
  vimshell: > echo Hello

Do (Unsave output on command line):
  \nx

Expect:
  vimshell: > ls
  bin            records    share     tentel_password.txt  TODO
  pstree_output  sensitive  temp_dir  test.vsh             xresources
  $ 
  vimshell: > x
  vimshell: > echo Hello

Do (Unsave output when in output):
  \<C-n>\<C-n>\nx

Expect:
  vimshell: > ls
  bin            records    share     tentel_password.txt  TODO
  pstree_output  sensitive  temp_dir  test.vsh             xresources
  $ 
  vimshell: > echo Hello
  vimshell: > x

"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
"                               Select Command                                "
"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""

Given vsh (vsh buffer):
  vimshell: >
  vimshell: > 
  vimshell: >    #echo Hello there
  vimshell: > echo Hello there
  Hello there
  vimshell: >    echo Hello there

Do (Does nothing before empty prompt):
  cicx

Expect:
  imshell: >
  vimshell: > 
  vimshell: >    #echo Hello there
  vimshell: > echo Hello there
  Hello there
  vimshell: >    echo Hello there

Do (Works on empty prompts (Reasonably: not great)):
  jcicx

Expect:
  vimshell: >
  vimshell: >x
  vimshell: >    #echo Hello there
  vimshell: > echo Hello there
  Hello there
  vimshell: >    echo Hello there

Do (Ignores comment prompts):
  jjcicx

Expect:
  vimshell: >
  vimshell: >x
  vimshell: >    #echo Hello there
  vimshell: > echo Hello there
  Hello there
  vimshell: >    echo Hello there


# Real command
Do (Selects inner command on real command):
  jjjcicx

Expect:
  vimshell: >
  vimshell: > 
  vimshell: >    #echo Hello there
  vimshell: > x
  Hello there
  vimshell: >    echo Hello there


Do (Selects outer command on real command):
  jjjcacx

Expect:
  vimshell: >
  vimshell: > 
  vimshell: >    #echo Hello there
  vimshell: > x
  Hello there
  vimshell: >    echo Hello there


# Select command when in output
Do (Selects inner command when in output):
  jjjjcicx

Expect:
  vimshell: >
  vimshell: > 
  vimshell: >    #echo Hello there
  vimshell: > x
  Hello there
  vimshell: >    echo Hello there


Do (Selects outer command when in output):
  jjjjcacx

Expect:
  vimshell: >
  vimshell: > 
  vimshell: >    #echo Hello there
  vimshell: > x
  Hello there
  vimshell: >    echo Hello there


# Command with spaces
Do (Selects inner command excluding spaces):
  jjjjjcicx

Expect:
  vimshell: >
  vimshell: > 
  vimshell: >    #echo Hello there
  vimshell: > echo Hello there
  Hello there
  vimshell: >    x

Do (Selects outer command including spaces):
  jjjjjcacx

Expect:
  vimshell: >
  vimshell: > 
  vimshell: >    #echo Hello there
  vimshell: > echo Hello there
  Hello there
  vimshell: > x


"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""
"                             Output Text object                              "
"""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""""

Given vsh (vsh buffer):
  vimshell: >
  vimshell: >
  One line output
  vimshell: >
  Multiple
  line
  output
  vimshell: >
  Output at the
  end of the buffer

Do (Change output when no output):
  ciox

Expect:
  imshell: >
  vimshell: >
  One line output
  vimshell: >
  Multiple
  line
  output
  vimshell: >
  Output at the
  end of the buffer

Do (Change OUTPUT when no output):
  caox

Expect:
  x
  vimshell: >
  One line output
  vimshell: >
  Multiple
  line
  output
  vimshell: >
  Output at the
  end of the buffer

Do (Change output when one line of output):
  jciox

Expect:
  vimshell: >
  vimshell: >
  x
  vimshell: >
  Multiple
  line
  output
  vimshell: >
  Output at the
  end of the buffer

Do (Change OUTPUT when one line of output):
  jcaox

Expect:
  vimshell: >
  x
  vimshell: >
  Multiple
  line
  output
  vimshell: >
  Output at the
  end of the buffer

Do (Change output when multiple lines):
  jjjciox

Expect:
  vimshell: >
  vimshell: >
  One line output
  vimshell: >
  x
  vimshell: >
  Output at the
  end of the buffer

Do (Change output when multiple lines):
  jjjcaox

Expect:
  vimshell: >
  vimshell: >
  One line output
  x
  vimshell: >
  Output at the
  end of the buffer
